
(pyenv) ( export APPDIR=/workspace/appimage/AppDir; export VIRTUAL_ENV="$APPDIR/usr/pyenv"; export PATH="$VIRTUAL_ENV/bin:$APPDIR/usr/python3/bin:$APPDIR/usr/bin:$PATH"; export LD_LIBRARY_PATH="$APPDIR/usr/lib:$APPDIR/usr/lib64:$APPDIR/usr/python3/lib:$LD_LIBRARY_PATH"; GI_TYPELIB_PATH=$HERE/usr/lib/girepository-1.0:$HERE/usr/lib64/girepository-1.0 "$VIRTUAL_ENV/bin/python" -c "import gi; from xpra.os_util import POSIX, gi_import; gi_import('Gtk'); gi.require_version('Gtk', '3.0'); print('OK')"; xpra attach --encoding=help )
Unable to init server: Could not connect: Connection refused
Unable to init server: Could not connect: Connection refused
OK
Warning: XDG_RUNTIME_DIR is not defined
 and '/run/user/1000' does not exist
 using '/tmp'
xpra main error:
Traceback (most recent call last):
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 149, in main
    return run_mode(script_file, cmdline, error_handler, options, args, mode, defaults)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 540, in run_mode
    return do_run_mode(script_file, cmdline, error_cb, options, args, full_mode, defaults)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 647, in do_run_mode
    return run_client(script_file, cmdline, error_cb, options, args, mode)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 1627, in run_client
    app = get_client_app(cmdline, error_cb, opts, extra_args, mode)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 1871, in get_client_app
    app = get_client_gui_app(error_cb, opts, request_mode, extra_args, mode)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 1915, in get_client_gui_app
    app = make_client(opts)
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 2352, in make_client
    check_gtk_client()
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 361, in check_gtk_client
    check_gtk()
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 380, in check_gtk
    if not gtk_init_check():
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/scripts/main.py", line 371, in gtk_init_check
    Gtk = gi_import("Gtk")
  File "/workspace/appimage/AppDir/usr/pyenv/lib/python3.10/site-packages/xpra/os_util.py", line 56, in gi_import
    raise ImportError(f"unable to import {mod!r} {version=!r}: {e}") from None
ImportError: unable to import 'Gtk' version='3.0': Namespace Gtk not available

(pyenv) GI_TYPELIB_PATH=$HERE/usr/lib/girepository-1.0:$HERE/usr/lib64/girepository-1.0 xpra attach --encoding=help
Warning: XDG_RUNTIME_DIR is not defined
 and '/run/user/1000' does not exist
 using '/tmp'
failed to initialize Gtk, no display?
(pyenv) GI_TYPELIB_PATH=$HERE/usr/lib/girepository-1.0:$HERE/usr/lib64/girepository-1.0 xpra start --encoding=help
Warning: XDG_RUNTIME_DIR is not defined
 and '/run/user/1000' does not exist
 using '/tmp'
xpra server supports the following encodings:
(please wait, encoder initialization may take a few seconds)
2025-07-16 21:54:41,961 Error: cannot find the html web root
2025-07-16 21:54:41,961  '/opt/pyenv/share/xpra/www' does not exist
2025-07-16 21:54:41,961  install the `xpra-html5` package
2025-07-16 21:54:41,961  or turn off the builtin web server using `html=no`
2025-07-16 21:54:41,962 Warning: unable to configure {SSH_AUTH_SOCK} without a valid session directory
 * grayscale   same as 'auto' but in grayscale mode
 * png         Portable Network Graphics (lossless, 24bpp or 32bpp for transparency)
 * png/P       Portable Network Graphics (lossy, 8bpp colour)
 * png/L       Portable Network Graphics (lossy, 8bpp grayscale)
 * webp        WebP compression (supports lossless and lossy modes)
 * rgb         Raw RGB pixels, lossless , may be compressed using lz4 (24bpp or 32bpp for transparency)
 * jpeg        JPEG lossy compression
 * scroll      motion vectors, supplemented with picture codecs

